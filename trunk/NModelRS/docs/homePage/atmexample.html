<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="atmexample_files/filelist.xml">
<link rel=Edit-Time-Data href="atmexample_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>ATMExample</title>
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:HyphenationZone>21</w:HyphenationZone>
  <w:DrawingGridHorizontalSpacing>9,05 pt</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>9,05 pt</w:DrawingGridVerticalSpacing>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:Arial;
	mso-font-kerning:16.0pt;}
h2
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Arial;
	font-style:italic;}
h3
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:13.0pt;
	font-family:Arial;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:70.85pt 2.0cm 70.85pt 2.0cm;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:56561664;
	mso-list-template-ids:-243490026;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l1
	{mso-list-id:263923795;
	mso-list-template-ids:-1985065588;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l2
	{mso-list-id:900561734;
	mso-list-type:hybrid;
	mso-list-template-ids:602074594 67829761 67829763 67829765 67829761 67829763 67829765 67829761 67829763 67829765;}
@list l2:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l2:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l2:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l2:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l2:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l2:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l2:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l2:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l2:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l3
	{mso-list-id:1182280286;
	mso-list-type:hybrid;
	mso-list-template-ids:780304036 67829761 67829763 67829765 67829761 67829763 67829765 67829761 67829763 67829765;}
@list l3:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	font-family:Symbol;}
@list l3:level2
	{mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l3:level3
	{mso-level-tab-stop:108.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l3:level4
	{mso-level-tab-stop:144.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l3:level5
	{mso-level-tab-stop:180.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l3:level6
	{mso-level-tab-stop:216.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l3:level7
	{mso-level-tab-stop:252.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l3:level8
	{mso-level-tab-stop:288.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l3:level9
	{mso-level-tab-stop:324.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="9218"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
  <o:regrouptable v:ext="edit">
   <o:entry new="1" old="0"/>
   <o:entry new="2" old="0"/>
   <o:entry new="3" old="0"/>
   <o:entry new="4" old="0"/>
   <o:entry new="5" old="0"/>
   <o:entry new="6" old="0"/>
  </o:regrouptable>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=FI link=blue vlink=purple style='tab-interval:65.2pt'>

<div class=Section1>

<h1 align=center style='text-align:center'><span lang=EN-GB style='mso-ansi-language:
EN-GB'>ATMExample<o:p></o:p></span></h1>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span class=GramE><span lang=EN-GB style='mso-ansi-language:
EN-GB'>Chapter 10 in <a href="http://www.cs.waikato.ac.nz/~marku/mbt/">Practical
Model-Based Testing: A Tools Approach</a> presents The ATM Case Study; <em>(A
control-oriented model in UML)</em> using an <a
href="http://www.math-cs.gordon.edu/courses/cps211/ATMExample/index.html">ATMExample</a>
developed by Russell C. Bjork for a university course on <a
href="http://www.math-cs.gordon.edu/courses/cps211/index.html">Object-Oriented
Software Development</a>.</span></span><span lang=EN-GB style='mso-ansi-language:
EN-GB'> <o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>This
ATMExample comes with a Java implementation of a simulated ATM. I have modelled
the ATM in C# (using Visual C# 2008 Express) and made a Java test harness
(using NetBeans 6.7.1). <o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>ATM<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The ATM
simulator looks like this<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=DA
style='mso-ansi-language:DA'><!--[if gte vml 1]><v:shapetype id="_x0000_t75"
 coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe"
 filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:465.75pt;
 height:303.75pt'>
 <v:imagedata src="atmexample_files/image003.jpg" o:title="ATM"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=621 height=405
src="atmexample_files/image003.jpg" v:shapes="_x0000_i1025"><![endif]></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>You can try
it out as an <a
href="http://www.math-cs.gordon.edu/courses/cps211/ATMExample/index.html">applet</a>.
&nbsp;<o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>C# model<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The C#
model comprises 7 cs files with a total of 23 actions in 567 lines of text<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l2 level1 lfo3;tab-stops:list 36.0pt'><span
     lang=EN-GB style='mso-ansi-language:EN-GB'><a
     href="atmexample_files/ATM.cs.txt">ATM</a> for initial states and actions<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo3;tab-stops:list 36.0pt'><span
     lang=EN-GB style='mso-ansi-language:EN-GB'><a
     href="atmexample_files/Session.cs.txt">Session</a> for transactions<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo3;tab-stops:list 36.0pt'><span
     lang=EN-GB style='mso-ansi-language:EN-GB'><a
     href="atmexample_files/Account.cs.txt">Account</a> and <a
     href="atmexample_files/Card.cs.txt">Card</a> and <a
     href="atmexample_files/CardAccounts.cs.txt">CardAccounts</a> modelling bank
     objects<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo3;tab-stops:list 36.0pt'><span
     lang=EN-GB style='mso-ansi-language:EN-GB'><a
     href="atmexample_files/Test.cs.txt">Test</a> with features for testing<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo3;tab-stops:list 36.0pt'><span
     lang=EN-GB style='mso-ansi-language:EN-GB'><a
     href="atmexample_files/Factory.cs.txt">Factory</a> with various combinations
     of features<o:p></o:p></span></li>
</ul>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>Here is an
excerpt from ATM.cs modelling the operator loading a number <span class=GramE>of<span
style='mso-spacerun:yes'>  </span>$</span>20 bills into the machine<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
class=GramE><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";
color:blue;mso-ansi-language:EN-GB'>internal</span></span><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'> <span
style='color:blue'>static</span> <span style='color:#2B91AF'>State</span> state
= <span style='color:#2B91AF'>State</span>.init;</span><span lang=EN-GB
style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
class=GramE><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";
color:blue;mso-ansi-language:EN-GB'>internal</span></span><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'> <span
style='color:blue'>static</span> <span style='color:blue'>int</span> cashOnHand
= 0;</span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>&nbsp;</span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>[<span style='color:#2B91AF'>Action</span>]</span><span lang=EN-GB
style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
class=GramE><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";
color:blue;mso-ansi-language:EN-GB'>static</span></span><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'> <span
style='color:#2B91AF'>MSG</span> setCash(<span style='color:blue'>int</span>
bills) </span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>{</span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>&nbsp;&nbsp;&nbsp; <span class=GramE>cashOnHand</span> = bills * 20;</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>&nbsp;&nbsp; &nbsp;<span class=GramE>state</span> = <span
style='color:#2B91AF'>State</span>.idle;</span><span lang=EN-GB
style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>&nbsp;&nbsp;&nbsp; <span class=GramE><span style='color:blue'>return</span></span>
<span style='color:#2B91AF'>MSG</span>.IDLE_MSG;</span><span lang=EN-GB
style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>}</span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
class=GramE><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";
color:blue;mso-ansi-language:EN-GB'>static</span></span><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'> <span
style='color:blue'>bool</span> setCashEnabled() { <span style='color:blue'>return</span>
state == <span style='color:#2B91AF'>State</span>.waitingForCash; }</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Scenarios<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>There are a
number of scenarios specified by means of Finite State Machines, e.g., for
limiting the number of bills in the cash register to 10<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
class=GramE><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";
mso-ansi-language:EN-GB'>FSM(</span></span><span lang=EN-GB style='font-size:
10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'>0,
AcceptingStates(0), Transitions(t(0, setCash_Start(10), 0)))<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-GB
style='mso-ansi-language:EN-GB'>The two cards available in the simulation are
specified in <a href="atmexample_files/fsm_cards.txt">fsm_cards.txt</a> ending
with an <span class=GramE>init(</span>) action taking the model out of the
initial setup state. With <a href="atmexample_files/fsm_card1.txt">fsm_card1.txt</a>
only card1 can be used. <o:p></o:p></span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-GB
style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-GB
style='mso-ansi-language:EN-GB'>Other fsm’s specify scenarios for <a
href="atmexample_files/fsm_pinerror.txt">pin errors</a> or <a
href="atmexample_files/fsm_withdrawal.txt">withdrawal</a> of $200. <o:p></o:p></span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-GB
style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-autospace:none'><span lang=EN-GB
style='mso-ansi-language:EN-GB'>The fsm’s can be combined with the model and
its features to give a smaller, more tractable state space. <o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Graph<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The <a
href="http://nmodel.codeplex.com/wikipage?title=Model%20Program%20Viewer&amp;referringTitle=Home">Model
Program Viewer</a> mpv visualizes states and transitions. In the scenario shown
the operator can switch the ATM on and off and a user may insert an unknown
(unreadable) card or card1 (with correct or wrong pincode) and retrieve it
again without performing any transactions. <o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
class=GramE><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";
mso-ansi-language:EN-GB'>mpv</span></span><span lang=EN-GB style='font-size:
10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'> /r:ATM.dll
ATM.Factory.CreateNoTransactions /fsm:fsm_cash.txt</span><span lang=EN-GB
style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB style='font-size:10.0pt;
font-family:"Courier New";mso-ansi-language:EN-GB'>/fsm:fsm_card1.txt<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt;text-autospace:none'><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=DA style='mso-ansi-language:DA'><!--[if gte vml 1]><v:shape
 id="_x0000_i1026" type="#_x0000_t75" style='width:672pt;height:715.5pt'>
 <v:imagedata src="atmexample_files/image006.jpg" o:title="non-det"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=896 height=954
src="atmexample_files/image006.jpg" v:shapes="_x0000_i1026"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Test Suite<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The <a
href="http://nmodel.codeplex.com/wikipage?title=Offline%20Test%20Generator&amp;referringTitle=Home">Offline
Test Generator</a> otg generates a test suite comprising a number of test cases
in an output file. Below is the test suite corresponding to the graph above.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>otg</span></span><span lang=EN-GB style='font-size:10.0pt;font-family:
"Courier New";mso-ansi-language:EN-GB'> r:ATM.dll
ATM.Factory.CreateNoTransactions /fsm:fsm_cash.txt</span><span lang=EN-GB
style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB style='font-size:10.0pt;
font-family:"Courier New";mso-ansi-language:EN-GB'>/fsm:fsm_card1.txt&nbsp;/file:</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> </span><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'>testsuite_notrans.txt<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";
mso-ansi-language:EN-GB'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>TestSuite(</span></span><span lang=EN-GB style='font-size:10.0pt;
font-family:"Courier New";mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>    </span><span class=GramE>TestCase(</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>createAccount(</span>Account(1),
1, ACCT_TYPE(&quot;CHECKING&quot;), 10000),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>createAccount(</span>Account(2),
2, ACCT_TYPE(&quot;SAVINGS&quot;), 100000),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>createAccount(</span>Account(3),
3, ACCT_TYPE(&quot;MONEYMARKET&quot;), 500000),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>createCard(</span>Card(1),
1, 42),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>linkCardAccount(</span>1,
1),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>linkCardAccount(</span>1,
2),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>init(</span>),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>switchOn(</span>),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>setCash_<span class=GramE>Start(</span>10),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>setCash_<span class=GramE>Finish(</span>MSG(&quot;IDLE_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custInsertCard_<span class=GramE>Start(</span>0),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custInsertCard_<span class=GramE>Finish(</span>MSG(&quot;UNREADABLE_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>ejectCard_<span class=GramE>Start(</span>),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>ejectCard_<span class=GramE>Finish(</span>MSG(&quot;IDLE_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custInsertCard_<span class=GramE>Start(</span>1),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custInsertCard_<span class=GramE>Finish(</span>MSG(&quot;PIN_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custEnterPin_<span class=GramE>Start(</span>42),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custEnterPin_<span class=GramE>Finish(</span>MSG(&quot;SESSION_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>custCancel(</span>),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>ejectCard_<span class=GramE>Start(</span>),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>ejectCard_<span class=GramE>Finish(</span>MSG(&quot;IDLE_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custInsertCard_<span class=GramE>Start(</span>1),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custInsertCard_<span class=GramE>Finish(</span>MSG(&quot;PIN_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>   </span><span style='mso-spacerun:yes'>     </span><span
class=GramE>custCancel(</span>),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>ejectCard_<span class=GramE>Start(</span>),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>ejectCard_<span class=GramE>Finish(</span>MSG(&quot;IDLE_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custInsertCard_<span class=GramE>Start(</span>1),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custInsertCard_<span class=GramE>Finish(</span>MSG(&quot;PIN_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custEnterPin_<span class=GramE>Start(</span>0),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>custEnterPin_<span class=GramE>Finish(</span>MSG(&quot;SESSION_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>       </span><span style='mso-spacerun:yes'> </span><span
class=GramE>custCancel(</span>),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>ejectCard_<span class=GramE>Start(</span>),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>ejectCard_<span class=GramE>Finish(</span>MSG(&quot;IDLE_MSG&quot;)),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>switchOff_<span class=GramE>Start(</span>),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>switchOff_<span class=GramE>Finish(</span>MSG(&quot;OFF_MSG&quot;))<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>    </span>)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'>)<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";
mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The otg
tool produces a test suite with minimal transition coverage, where the <span
class=GramE>chinese</span> postman covers all transitions in the graph. <o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Test Harness<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>&nbsp;The
Java test harness consists of 3 classes<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='mso-list:l3 level1 lfo6;tab-stops:list 36.0pt'><span
     lang=EN-GB style='mso-ansi-language:EN-GB'><a
     href="atmexample_files/NewMain.java.txt">NewMain</a> wraps the original Main
     class and starts the test with a file or remote stepper<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l3 level1 lfo6;tab-stops:list 36.0pt'><span
     lang=EN-GB style='mso-ansi-language:EN-GB'><a
     href="atmexample_files/NewATM.java.txt">NewATM</a> wraps the original ATM
     class in order to exit on exceptions<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l3 level1 lfo6;tab-stops:list 36.0pt'><span
     lang=EN-GB style='mso-ansi-language:EN-GB'><a
     href="atmexample_files/NewSimulation.java.txt">NewSimulation</a> wraps the
     original Simulation class and intercepts various method calls<o:p></o:p></span></li>
</ul>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The ATM
simulation uses AWT so object based access to the GUI is not available and a
robot pixel based access is not feasible. However, interception of method calls
in the implementation is a useful strategy when the implementation is
well-structured. <o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Offline Test<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The test
suite can be executed by the test harness invoking the file stepper<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>java</span></span><span lang=EN-GB style='font-size:10.0pt;font-family:
"Courier New";mso-ansi-language:EN-GB'> -Djava.util.logging.config.file=logging.properties<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>     </span>-<span class=GramE>jar</span> ATM.jar -f
testsuite_notrans.txt 10000<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The
filestepper is instructed to timeout if 10 seconds pass without calls from the
harness. This will exercise the ATM GUI and produce the following log<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:EN-GB'>…<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>readLine</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>: switchOn()<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>newSwitchChanged</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>: true<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>readLine</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>:
setCash_Start(10)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>getInitialCash</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>: 20*10<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>display</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>: Please insert
your card<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>readLine</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>:
setCash_Finish(MSG(&quot;IDLE_MSG&quot;))<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>readLine</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>:
custInsertCard_Start(0)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>newCardInserted</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>readCard</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>: 0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>display</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>: Unable to
read card<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>readLine</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>:
custInsertCard_Finish(MSG(&quot;UNREADABLE_MSG&quot;))<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>readLine</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>:
ejectCard_Start()<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>display</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>: Please insert
your card<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>readLine</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>:
ejectCard_Finish(MSG(&quot;IDLE_MSG&quot;))<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>…<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>readLine</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>:
switchOff_Finish(MSG(&quot;OFF_MSG&quot;))<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>read</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>: *** TestCase
End ***<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>read</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>: *** TestSuite
End ***<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>main</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>: *** EOF
TestSuite ***<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The offline
test may also run with the remote stepper. Start the Java test harness first<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>java</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>
-Djava.util.logging.config.file=logging.properties -jar ATM.jar -s 4711<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>&nbsp;<span
class=GramE>and</span> then the <a
href="http://nmodel.codeplex.com/wikipage?title=Conformance%20Tester&amp;referringTitle=Home">Conformance
Tester</a><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>ct</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>
/iut:RemoteStepperProxy.Stepper.Create /r:RemoteStepperProxy.dll<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>   </span>/testSuite<span class=GramE>:<span
style='mso-bidi-font-size:10.0pt;mso-bidi-font-family:"Courier New"'>testsuite</span></span></span><span
lang=EN-GB style='font-size:10.0pt;font-family:"Courier New";mso-ansi-language:
EN-GB'>_notrans.txt </span><span lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-GB'>/logfile:ct_notrans.log<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The file </span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>RemoteStepperProxy.dll.conf</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> in the same directory as </span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>RemoteStepperProxy.dll
</span><span lang=EN-GB style='mso-ansi-language:EN-GB'>configures it to
connect to </span><span lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-GB'>localhost<span class=GramE>:4711</span></span><span
lang=EN-GB style='mso-ansi-language:EN-GB'>. After the run the log contains<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>TestResult(</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>0,
Verdict(&quot;Success&quot;), &quot;&quot;,<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>    </span><span class=GramE>Trace(</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>createAccount(</span>Account(1),
1, ACCT_TYPE(&quot;CHECKING&quot;), 10000),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span><span class=GramE>createAccount(</span>Account(2),
2, ACCT_TYPE(&quot;SAVINGS&quot;), 100000),<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>…<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>        </span>ejectCard_<span class=GramE>Finish(</span>MSG(&quot;IDLE_MSG&quot;))<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>    </span>)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>)</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<h3><span lang=EN-GB style='mso-ansi-language:EN-GB'>Online Test<o:p></o:p></span></h3>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The ATM
model does not know the bank implementation of transaction validation, which
shows as multiple transitions between same start and end states with merged
labels in the graph <o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
style='mso-ansi-language:EN-GB'><!--[if gte vml 1]><v:shape id="_x0000_i1027"
 type="#_x0000_t75" style='width:285pt;height:151.5pt'>
 <v:imagedata src="atmexample_files/image002.jpg" o:title="non-det"/>
</v:shape><![endif]--><![if !vml]><img border=0 width=380 height=202
src="atmexample_files/image002.jpg" v:shapes="_x0000_i1027"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The
generated test suite fails because the implementation never returns </span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>INVALID_TO_ACT</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> when <span class=GramE>the from</span>
account is invalid. But this (shallow) non-deterministic model may be tested
on-the-fly with ct and the asynchronous stepper. Start the Java test harness
first, instructing it to send message actions as observations to </span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>localhost<span
class=GramE>:4712</span></span><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>java</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>
-Djava.util.logging.config.file=logging.properties -jar ATM.jar -s 4711
127.0.0.1 4712<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>&nbsp;<span
class=GramE>and</span> then the <a
href="http://nmodel.codeplex.com/wikipage?title=Conformance%20Tester&amp;referringTitle=Home">Conformance
Tester</a><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span class=GramE><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>ct</span></span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>
/iut:RemoteStepperProxy.AsyncStepper.Create /r:RemoteStepperProxy.dll<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>   </span>/r<span class=GramE>:ATM.dll</span>
ATM.Factory.Create<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>   </span>/fsm<span class=GramE>:fsm</span>_card1.txt
/fsm:fsm_transfer.txt /fsm:fsm_wait.txt<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>   </span>/o<span class=GramE>:message</span> /runs:1
/steps:1000 /continueOnFailure- <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:65.2pt'><span lang=EN-GB
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'><span
style='mso-spacerun:yes'>   </span>/logfile<span class=GramE>:ct</span>_transfer-nd.log<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The ct tool
uses the default random strategy for selecting the next action but waits for
observable message actions before proceeding. It stops after 1000 steps. You
could use this to produce random tests within the scenario each time the test
is run, e.g., in a continuous integration process. Or you could seed the random
generator to reproduce test runs or implement your own strategy for ct to use.<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'>The ATM
model has a </span><span lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman";
mso-ansi-language:EN-GB'>Deterministic</span><span lang=EN-GB style='mso-ansi-language:
EN-GB'> feature that corresponds to the ATM simulation’s transaction validation
sequence. Using this in combination with the model, with </span><span
lang=EN-GB style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-GB'>ATM.Factory.CreateDeterministic,</span><span
lang=EN-GB style='mso-ansi-language:EN-GB'> allows you to generate usable test
suites - at the cost of relying on implementation knowledge. <o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-GB style='mso-ansi-language:EN-GB'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-GB
style='mso-ansi-language:EN-GB'><a href="http://developer.berlios.de"
title="BerliOS Developer"><span style='text-decoration:none;text-underline:
none'><img border=0 width=124 height=32 id="_x0000_i1028"
src="http://developer.berlios.de/bslogo.php?group_id=11470"
alt="BerliOS Developer Logo"></span></a><o:p></o:p></span></p>

</div>

</body>

</html>
